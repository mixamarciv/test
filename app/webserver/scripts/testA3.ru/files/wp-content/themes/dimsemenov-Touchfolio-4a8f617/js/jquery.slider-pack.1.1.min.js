/*
 * Two Dimensional Slider for Touchfolio theme.  
 * 
 * Copyright 2012 Dmitry Semenov. http://dimsemenov.com
 * 
 * You must not use this slider outside the Touchfolio theme. Slider is based on commercial RoyalSlider script.
 *
 * Modified by sydcode to fix video bug. Modified November 2012.
 * 
*/
!function(t){function e(e,i){var r=navigator.userAgent.toLowerCase(),n=this,a=jQuery.browser,s=a.mozilla,o=a.webkit,d=(r.match(/(iphone|ipod|ipad)/),r.indexOf("android")>-1,r.indexOf("chrome")>-1),l=-1!=navigator.appVersion.indexOf("Mac");if(n._az=d,n._by=tdSliderVars,n.sliderRoot=t(e),n._cx=n.sliderRoot.find(".slider-wrapper"),n._dw=!1,n._ev=!1,n.onTransitionStart=function(){},n.onTransitionComplete=function(){},n._fu,n._gt,n._hs,n._ir,n._jq,n._kp=!1,n._lo="none",n._mn=!1,n._az1=!1,n._by1=!1,n._cx1=!1,n.moved,n.startX,n.startY,n.pointX,n.pointY,n.changedX,n.changedY,n.firstLoaded=!1,n.directionLocked,n.x=0,n.y=0,n.loadingTimeout,n.settings=t.extend({},t.fn.twoDimSlider.defaults,i),n._ev1=n._fu1=d?!1:Modernizr.csstransforms3d,n._gt1="onorientationchange"in window?"orientationchange.tds resize.tds":"resize.tds",window.navigator.msPointerEnabled)("ontouchstart"in window||"createTouch"in document)&&(n.hasTouch=!1),n._hs1="MSPointerDown.tds",n._ir1="MSPointerMove.tds",n._jq1="MSPointerUp.tds ",n._kp1=n._jq1,n._lo1=n._hs1;else if("ontouchstart"in window||"createTouch"in document)n.hasTouch=!0,n._hs1="touchstart.tds",n._ir1="touchmove.tds",n._jq1="touchend.tds ",n._kp1="touchcancel.tds",n._lo1="touchstart";else{n.hasTouch=!1,n._mn1,n._az2;var r=t.browser;r.msie||r.opera?n._mn1=n._az2="move":r.mozilla?(n._mn1="-moz-grab",n._az2="-moz-grabbing"):l&&o&&(n._mn1="-webkit-grab",n._az2="-webkit-grabbing"),this._by2(),n._hs1="mousedown.tds",n._ir1="mousemove.tds",n._jq1="mouseup.tds",n._kp1="mouseup.tds",n._lo1="click"}n.hasTouch?(n._cx2=!0,n._dw2="touchstart"):(n._cx2=!0,n._dw2="click");var u='<div class="slider-wrapper"><div class="drag-container">',_=["center","top","right","bottom","left"];t.each(_,function(){u+='<div class="block '+this+'"><div class="block-inside"></div></div>'}),u+="</div></div>",u+='<div class="video-overlay"><div class=" video-close-button"><a href="javascript:void();" class="hidden-video underlined">'+n._by.closeVideo+'</a></div><div class="video-container"></div></div>',n._cx2,u+='<div class="slider-controls">',n._cx2&&(u+='<div class="arrow-left disabled-arrow"><a  href="javascript:void(0);" class="icon-bg"><span class="icon"></span><span class="info-text">'+n._by.prevAlbum+'</span></a></div><div class="arrow-right"><a href="javascript:void(0);" class="icon-bg"><span class="icon"></span><span class="info-text">'+n._by.nextAlbum+"</span></a></div>");var c=n._ev2().listurl;c&&(u+='<div class="back-to-list-button"><a class="close-gallery-button underlined" href="'+c+'">'+n._by.backToList+"</a></div>"),u+='<div class="slider-album-indicator">',u+='<div class="album-info-text"><a href="javascript:void(0);" title="Info" class="album-name-indicator underlined"></a><span class="item-count-indicator"></span></div>',u+="</div>",u+="</div>",n._fu2=n.sliderRoot.find(".gallery-posts-navigation"),n._gt2=!1,n._fu2.length>0&&(n._gt2=!0),n.sliderRoot.append(u),n._cx=n.sliderRoot.find(".slider-wrapper"),n.videoOverlay=n.sliderRoot.find(".video-overlay"),n.videoContainer=n.videoOverlay.find(".video-container"),n.currVideoImg="",n.isVideoPlaying=!1,n._hs2=n.videoOverlay.find(".video-close-button"),n._hs2.bind("click",function(){n.stopAndCloseVideo()}),n._ir2=!1;var m=n._cx;n._jq2=m.find(".drag-container"),n._kp2=m.find(".top"),n._lo2=m.find(".left"),n._mn2=m.find(".center"),n._az3=m.find(".right"),n._by3=m.find(".bottom"),n._cx3=!1,n.loadQueue,n.imageLoader,n._dw3,n._ev3,n._fu3,n._gt3=!1,n._hs3=0,n._ir3=!0,n._jq3=0,n._kp3=0,n._lo3=0,n._mn3=0,n.settings.disableContextMenu&&n.sliderRoot.bind("contextmenu",function(t){return t.preventDefault(),t.stopImmediatePropagation(),!1}),n.hasTouch?(n._az4=.5,n.settings.autoOpenDescription=!1):n._az4=.2,n._ev1?s?(n.browserSufix="-moz-",n._by4=n._cx4="-moz-transform",n.transitionEndEvent="transitionend.tds",n._fu1?(n._dw4="translate3d(",n._ev4="px, ",n._fu4="px, 0px)"):(n._dw4="translate(",n._ev4="px, ",n._fu4="px)")):o&&n._fu1?(n.browserSufix="-webkit-",n._by4=n._cx4="-webkit-transform",n.transitionEndEvent="webkitTransitionEnd.tds",n._fu1?(d||n._jq2.children().css({"-webkit-transform":"translateZ(0)","-webkit-perspective":"1000","-webkit-backface-visibility":"hidden"}),n._jq2.css({"-webkit-transform":"translateZ(0px)","-webkit-perspective":"1000","-webkit-backface-visibility":"hidden"}),n._dw4="translate3d(",n._ev4="px, ",n._fu4="px, 0px)"):(n._dw4="translate(",n._ev4="px, ",n._fu4="px)")):(n.browserSufix=/trident/i.test(navigator.userAgent)?"-ms-":"opera"in window?"-o-":"",n._by4=n._cx4=n.browserSufix+"transform",n.transitionEndEvent=n.browserSufix+"transitionend.tds",n._dw4="translate(",n._ev4="px, ",n._fu4="px)"):(n._cx4="left",n._by4="top",n._dw4="",n._ev4="",n._fu4="",n._gt4=""),n._hs4=n.sliderRoot.find(".slider-controls"),n._ir4=!1,n._jq4=!1,n._kp4=t(".main-header"),n._lo4=n._kp4.find(".menus-container"),n._lo4=n._kp4.find(".menus-container"),n.albumsArr=[],n.currAlbum,n._mn4=n._hs4.find(".slider-album-indicator"),n._az5=n._mn4.find(".album-info-text"),n._by5=n._mn4.find(".album-name-indicator"),n._cx5=n._mn4.find(".item-count-indicator"),n._dw5=t('<div class="album-info-block text-block"><div class="album-info-text"></div></div>').appendTo("body");if(n._mn4.bind("click",function(){n._ev5()}),n.settings.appendGalleriesToMenu){var f,b,h=n.sliderRoot.find(".two-dim-album"),p='<ul id="gallery-menu" class="menu">';h.each(function(e,i){f=t(i).data("start-item",0),b=f.attr("data-album-id"),p+='<li data-id="'+b+'" class="menu-item"><a href="#'+b+'">'+f.find(".album-title").text()+"</a></li>",n.albumsArr.push(f)}),p+="</ul>"}else n.sliderRoot.find(".two-dim-album").each(function(e,i){n.albumsArr.push(t(i).data("start-item",0))});if(!n.albumsArr.length>0)return void alert("Gallery error :(. No albums and images found");var v=0,g=window.location.hash;g&&(g=g.replace(/^#/,""),v=n.getAlbumIdByIdAtt(g)),n.currAlbum=n.albumsArr[v],n.currAlbumId=v,n.numAlbums=n.albumsArr.length,n._cx2&&(n._jq5=n.sliderRoot.find(".arrow-left").click(function(t){t.preventDefault(),n.prev()}),n._kp5=n.sliderRoot.find(".arrow-right").click(function(t){t.preventDefault(),n.next()})),n._az6=n._kp4.find(".primary-menu > .current-menu-item"),n.settings.appendGalleriesToMenu&&n.numAlbums>1&&(0!=n._az6.index()&&n._az6.before('<span class="menu-sep project-menu-sep">&mdash;</span>'),p+='<span class="menu-sep project-menu-sep">&mdash;</span>',n._az6.append(p),n._by6=n._az6.find("#gallery-menu").find("li"),n._by6.click(function(e){e.preventDefault(),e.stopImmediatePropagation();var i=n.getAlbumIdByIdAtt(t(this).attr("data-id"));n._cx6(i,"y",500,!0,!0)})),n.currAlbumItems=n.currAlbum.find(".two-dim-item"),n.currItemId=0,n.currAlbumNumItems=n.currAlbumItems.length,n.currAlbumScaleMode=n.currAlbum.data("img-scale");var y;t(window).bind(n._gt1,function(){y&&clearTimeout(y),y=setTimeout(function(){n.updateSliderSize()},35)}),n.updateSliderSize(),n.updateContents(),n._cx.bind(n._hs1,function(t){n._dw6(t)}),n.settings.keyboardNavEnabled&&t(document).keydown(function(t){n._by1||n._az1||(37===t.keyCode?(t.preventDefault(),n.prev()):39===t.keyCode?(t.preventDefault(),n.next()):40===t.keyCode?(t.preventDefault(),n.nextAlbum()):38===t.keyCode?(t.preventDefault(),n.prevAlbum()):73===t.keyCode&&n._ev5())}),t("body").bind("mouseleave",function(t){n._by1&&n._ev6(t)}),n.hasTouch||n.sliderRoot.bind("mousewheel",function(t,e){0>e?n.next():e>0&&n.prev()}),n._fu6=!1,n._gt6=!1,n._hs6,n._ir6(),n.hasTouch&&(t.idleTimer(n.hasTouch?4e3:2e3,document,{events:"mousemove touchend mouseup"}),t(document).bind("idle.idleTimer",function(){n._ir4||n._jq6()})),n.settings.autoOpenDescription&&n.sliderWidth>900&&(n._mn6(),n._az7(n._mn4),n.albumsArr[n.currAlbumId].data("sawInfo",!0))}e.prototype={getAlbumIdByIdAtt:function(t){for(var e=this,i=e.albumsArr,r=0;r<i.length;r++)if(i[r].attr("data-album-id")===t)return r;return 0},_jq7:function(){t(window).unbind("hashchange.tds")},_kp7:function(){var t=this;t._lo7(t.albumsArr[t.currAlbumId].attr("data-album-id"))},_ir6:function(){var e=this;t(window).bind("hashchange.tds",function(){var t=location.hash;t=t.replace(/^#/,"");var i=e.getAlbumIdByIdAtt(t);e._cx6(i,"y",500)})},_lo7:function(t){var e=this;e._jq7(),window.location.hash=t,e._hs6&&clearTimeout(e._hs6),e._hs6=setTimeout(function(){e._ir6()},60)},_mn7:function(t){function e(){s._az1=!1}function i(){s._az1=!1,s._by8(r,"",n,!1,!0,e)}var r,n,a,s=this,o=Math.max(s._az8,130)/3;if(s._jq=200,"bottom"===t?(r=s._mn3*s.sliderHeight,n="y",a=-o):"top"===t?(r=s._mn3*s.sliderHeight,n="y",a=o):"right"===t?(r=s._lo3*s.sliderWidth,n="x",a=-o):"left"===t&&(r=s._lo3*s.sliderWidth,n="x",a=o),s._gt2){var d;if(d="left"===t||"top"===t?s._fu2.find("a[rel=next]").attr("href"):s._fu2.find("a[rel=prev]").attr("href"))return void(window.location.href=d)}s._by8(r+a,"",n,!1,!0,i)},_cx6:function(t,e,i,r,n,a){var s,o,d,l=this;if(l._by1||l._az1)return!1;if(l.isVideoPlaying&&l.stopAndCloseVideo(),l._gt3="y"===e&&r?!0:!1,"x"===e)if("next"===t){if(!l._dw&&l.currItemId+1>=l.currAlbumNumItems)return l._mn7("right"),!1;l._cx8(),l._lo3=l._jq3-1,l._dw8(l.currAlbumId,l.currItemId+1),s=l._az3,l._az3=l._lo2,l._lo2=l._mn2,l._mn2=s,o=l._lo3*l.sliderWidth,l._jq=i,l._by8(o,"next","x",!1,n)}else if("prev"===t){if(!l._dw&&l.currItemId-1<0)return l._mn7("left"),!1;l._cx8(),l._lo3=l._jq3+1,l._dw8(l.currAlbumId,l.currItemId-1),s=l._mn2,l._mn2=l._lo2,l._lo2=l._az3,l._az3=s,o=l._lo3*l.sliderWidth,l._jq=i,l._by8(o,"prev","x",!1,n)}else{var u=parseInt(t,10);u===l.currItemId+1?l._cx6("next","x",i):u===l.currAlbumId-1?l._cx6("prev","x",i):u>l.currItemId?(l._lo3=l._jq3-1,l._dw8(l.currAlbumId,currItemId),s=l._az3,l._az3=l._lo2,l._lo2=l._mn2,l._mn2=s,o=l._lo3*l.sliderWidth,l._jq=i,l._mn2.find("img").css("visibility","hidden"),l._by8(o,"next","x",!0,n)):u<l.currItemId&&(l._mn3=l._kp3+1,l._dw8(l.currAlbumId,currItemId),s=l._mn2,l._mn2=l._lo2,l._lo2=l._az3,l._az3=s,o=l._mn3*l.sliderHeight,l._jq=i,l._mn2.find("img").css("visibility","hidden"),l._by8(o,"prev","x",!0,n))}else if("next"===t){if(!l._ev&&l.currAlbumId+1>=l.numAlbums)return l._mn7(a?"right":"bottom"),!1;l._cx8(),l._mn3=l._kp3-1,l._dw8(l.currAlbumId+1,0),d=l._ev8(l.currAlbumId),l.currItemId=d.data("start-item"),s=l._by3,l._by3=l._kp2,l._kp2=l._mn2,l._mn2=s,o=l._mn3*l.sliderHeight,l._jq=i,l._by8(o,"next","y",!1,n)}else if("prev"===t){if(!l._ev&&l.currAlbumId-1<0)return l._mn7(a?"left":"top"),!1;l._cx8(),l._mn3=l._kp3+1,l._dw8(l.currAlbumId-1,0),d=l._ev8(l.currAlbumId),l.currItemId=d.data("start-item"),s=l._mn2,l._mn2=l._kp2,l._kp2=l._by3,l._by3=s,o=l._mn3*l.sliderHeight,l._jq=i,l._by8(o,"prev","y",!1,n)}else{var _=parseInt(t,10);_===l.currAlbumId+1?l._cx6("next","y",i,r,n):_===l.currAlbumId-1?l._cx6("prev","y",i,r,n):_>l.currAlbumId?(l._mn3=l._kp3-1,l._dw8(_,0),d=l._ev8(l.currAlbumId),l.currItemId=d.data("start-item"),s=l._by3,l._by3=l._kp2,l._kp2=l._mn2,l._mn2=s,o=l._mn3*l.sliderHeight,l._jq=i,l._fu8(l._mn2,d.data("bg"),l.currAlbumId),l._mn2.find(".play-button-container").remove(),l._mn2.find("img").css("visibility","hidden"),l._by8(o,"next","y",!0,n)):_<l.currAlbumId&&(l._mn3=l._kp3+1,l._dw8(_,0),d=l._ev8(l.currAlbumId),l.currItemId=d.data("start-item"),s=l._mn2,l._mn2=l._kp2,l._kp2=l._by3,l._by3=s,o=l._mn3*l.sliderHeight,l._jq=i,l._fu8(l._mn2,d.data("bg"),l.currAlbumId),l._mn2.find(".play-button-container").remove(),l._mn2.find("img").css("visibility","hidden"),l._by8(o,"prev","y",!0,n))}l._gt8(e)},next:function(){var t=this;t._ir2||(t._ir2=!0,t.currItemId+1>=t.currAlbumNumItems&&t.currAlbumId<t.numAlbums-1?t._cx6("next","y",this.settings.transitionSpeed,!0,!0):t._cx6("next","x",this.settings.transitionSpeed,!0,!0),t._ir2=!1)},prev:function(){var t=this;t._ir2||(t._ir2=!0,!t._dw&&t.currItemId-1<0&&0!=t.currAlbumId?t._cx6("prev","y",this.settings.transitionSpeed,!0,!0):t._cx6("prev","x",this.settings.transitionSpeed,!0,!0),t._ir2=!1)},nextItem:function(){this._cx6("next","x",this.settings.transitionSpeed,!0,!0)},prevItem:function(){this._cx6("prev","x",this.settings.transitionSpeed,!0,!0)},nextAlbum:function(){this._cx6("next","y",this.settings.transitionSpeed,!0,!0)},prevAlbum:function(){this._cx6("prev","y",this.settings.transitionSpeed,!0,!0)},_fu8:function(t,e,i){t.data("bg-album-id")!==i&&(t.data("bg-album-id",i),t.css("background",e))},_dw6:function(e){var i=this;if(i._az1)return e.preventDefault(),!1;if(i._by1)return void(i.hasTouch&&(i._cx1=!0));i.hasTouch&&(i._cx1=!1),i._ev1&&i._jq2.css(i.browserSufix+"transition-duration","0s"),i._hs8(),i._by1=!0;var r;if(i.hasTouch){var n=e.originalEvent.touches;if(!(n&&n.length>0))return!1;r=n[0],n.length>1&&(i._cx1=!0)}else r=e,e.preventDefault();t(document).bind(i._ir1,function(t){i._ir8(t)}),t(document).bind(i._jq1,function(t){i._ev6(t)}),i._kp=!1,i._lo="",i.moved=!1,i.pointX=i._hs=i.startX=r.pageX,i.pointY=i._ir=i.startY=r.pageY,i.changedX=0,i.changedY=0,i.horDirection=0,i.verDirection=0,i.directionLocked=!1,i._fu=e.timeStamp||(new Date).getTime(),i._gt=0,i.hasTouch&&i._cx.bind(i._kp1,function(t){i._ev6(t)})},_ir8:function(t){var e,i=this;if(i.hasTouch){var r=t.originalEvent.touches;if(!r)return!1;if(r.length>1)return!1;e=r[0],t.preventDefault()}else e=t,t.preventDefault();var n=t.timeStamp||(new Date).getTime(),a=e.pageX-i.pointX,s=e.pageY-i.pointY;if(i.changedX+=Math.abs(a),i.changedY+=Math.abs(s),!(i.changedY<10&&i.changedX<7)){var o=i.x+a,d=i.y+s;i.moved=!0,i.pointX=e.pageX,i.pointY=e.pageY;var l=i._lo;return"x"===l?0!==a&&(i.horDirection=a>0?1:-1):"y"===l?0!==s&&(i.verDirection=s>0?1:-1):i.changedY>i.changedX?(i._kp=!0,i._lo="y",i.verDirection=s>0?1:-1):(i._lo="x",i.horDirection=a>0?1:-1),i._kp?(i._ev||(i.currAlbumId<=0&&e.pageY-this.startY>0&&(d=i.y+s*i._az4),i.currAlbumId>=i.numAlbums-1&&e.pageY-this.startY<0&&(d=i.y+s*i._az4)),i._jq8(d,"y"),n-i._fu>200&&(i._fu=n,i._ir=e.pageY)):(i._dw||(i.currItemId<=0&&e.pageX-this.startX>0&&(o=i.x+a*i._az4),i.currItemId>=i.currAlbumNumItems-1&&e.pageX-this.startX<0&&(o=i.x+a*i._az4)),i._jq8(o,"x"),n-i._fu>200&&(i._fu=n,i._hs=e.pageX)),!1}},_ev6:function(e){function i(t){return 200>t?200:t>500?500:t}function r(t,e,r){l="x"===t?_._jq3*_.sliderWidth:_._kp3*_.sliderHeight,u=Math.abs(_[t]-l),_._jq=u/r,e&&(_._jq+=250),_._jq=i(_._jq),_._by8(l,!1,t)}var n,a,s,o,d,l,u,_=this,c=_.hasTouch?e.originalEvent.changedTouches[0]:e;if(_._by1=!1,t(document).unbind(_._ir1),t(document).unbind(_._jq1),_.hasTouch&&_._cx.unbind(_._kp1),_._by2(),!_.moved&&!_._cx1)return _._ir4?void _._cx8():_.hasTouch?void(_._ir3?_._jq6():_._kp6()):void(t(e.target).hasClass("play-button-icon")||_.next());o=Math.max(30,e.timeStamp||(new Date).getTime())-_._fu;var m=0;if(_._kp)var f="y",b=c.pageY,h=_.startY,p=_._ir,v=_.currAlbumId,g=_.numAlbums,y=_.verDirection,x=_.sliderHeight,I=_._kp3,w=_._ev,k=!0;else var f="x",b=c.pageX,h=_.startX,p=_._hs,v=_.currItemId,g=_.currAlbumNumItems,y=_.horDirection,x=_.sliderWidth,I=_._jq3,w=_._dw,k=!1;if(n=b-h,a=Math.abs(n),s=b-p,d=Math.abs(s)/o,0===y||1>=g)return r(f,!0,d),!1;if(!w)if(0>=v){if(y>0)return r(f,!0,d),!1}else if(v>=g-1&&0>y)return r(f,!0,d),!1;if(b>h+m){if(0>y)return r(f,!1,d),!1;_._cx6("prev",f,i(Math.abs(_[f]-(I+1)*x)/d),k)}else if(h-m>b){if(y>0)return r(f,!1,d),!1;_._cx6("next",f,i(Math.abs(_[f]-(I-1)*x)/d),k)}else r(f,!1,d);return!1},_kp8:function(t,e,i,r){var n,a=this,s=a._ev8(i);if("start-item"===r&&(r=s.data("start-item")),n=a._lo8(i,r)){e.hasClass("last-block")&&e.removeClass("last-block");var o=n.data("img-scale");o||(o=s.data("img-scale"),n.data("img-scale",o)),t.push({block:e,item:n,bgColor:s.data("bg"),albumId:i})}else e.addClass("last-block")},_by8:function(t,e,i,r,n,a){function s(){var t,n=[];e&&("x"===i?(d._kp8(n,d._mn2,d.currAlbumId,d.currItemId),d._jq3=d._lo3,"next"===e?(d._az3.css("left",100*-d._jq3+100+"%"),d._kp8(n,d._az3,d.currAlbumId,d.currItemId+1)):"prev"===e&&(d._lo2.css("left",100*-d._jq3-100+"%"),d._kp8(n,d._lo2,d.currAlbumId,d.currItemId-1)),d._kp2.css("left",100*-d._jq3+"%"),d._by3.css("left",100*-d._jq3+"%"),t=d._ev8(d.currAlbumId),t.data("start-item",d.currItemId),d._kp8(n,d._by3,d.currAlbumId+1,"start-item"),d._kp8(n,d._kp2,d.currAlbumId-1,"start-item")):(t=d._ev8(d.currAlbumId),d.currItemId=t.data("start-item"),d._kp8(n,d._mn2,d.currAlbumId,d.currItemId),d._kp8(n,d._az3,d.currAlbumId,d.currItemId+1),d._kp3=d._mn3,"next"===e?(d._by3.css("top",100*-d._kp3+100+"%"),d._kp8(n,d._by3,d.currAlbumId+1,"start-item"),r&&d._kp8(n,d._kp2,d.currAlbumId-1,"start-item")):(d._kp2.css("top",100*-d._kp3-100+"%"),d._kp8(n,d._kp2,d.currAlbumId-1,"start-item"),r&&d._kp8(n,d._by3,d.currAlbumId+1,"start-item")),d._lo2.css("top",100*-d._kp3+"%"),d._az3.css("top",100*-d._kp3+"%"),d._kp8(n,d._lo2,d.currAlbumId,d.currItemId-1)),d._mn8(n)),d._gt3&&d._kp7(),setTimeout(function(){d._az1=!1,d.onTransitionComplete.call(d),d._gt3&&d._by2(),d.settings.autoOpenDescription&&d.sliderWidth>900?d._mn||(0===d.currItemId?(d._mn6(),d.albumsArr[d.currAlbumId].data("sawInfo",!0)):d._byn1(d._mn4)):d._byn1(d._mn4)},30)}var o,d=this;d.onTransitionStart.call(d),d._az1=!0,d[i]=t,o="x"===i?d._cx4:d._by4;var l={};isNaN(d._jq)&&(d._jq=400),d._ev1?(l[d.browserSufix+"transition-duration"]=d._jq+"ms",l[d.browserSufix+"transition-property"]=d.browserSufix+"transform",l[d.browserSufix+"transition-timing-function"]=void 0!=n?d.settings.css3easeInOutEasing:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",d._jq2.css(l),d._jq2.css(o,d._dw4+d.x+d._ev4+d.y+d._fu4)):(l[o]=t,d._jq2.animate(l,d._jq,n?d.settings.easeInOutEasing:"easeOut")),d.loadingTimeout=a?setTimeout(function(){a.call()},d._jq+50):setTimeout(function(){s()},d._jq+50)},_jq8:function(t,e){var i=this;i._ev1?"y"===e?(i.y=t,i._jq2.css(i._by4,i._dw4+i.x+i._ev4+i.y+i._fu4)):(i.x=t,i._jq2.css(i._cx4,i._dw4+i.x+i._ev4+i.y+i._fu4)):"y"===e?(i.y=t,i._jq2.css(i._by4,i.y)):(i.x=t,i._jq2.css(i._cx4,i.x))},updateSliderSize:function(){var t=this,e=window.innerWidth||document.body.clientWidth,i=(window.innerHeight||document.body.clientHeight,t._cx.width()),r=t._cx.height();if(i!=t.sliderWidth||r!=t.sliderHeight){t.sliderWidth=i,t.sliderHeight=r,t._az8=1,t._evn4=1,t.sliderWidth<600?(t._mn=!0,t.sliderRoot.addClass("smaller-collapsed-slider")):(t._mn=!1,t.sliderRoot.removeClass("smaller-collapsed-slider")),e>=850?(t._hs3="2",t._ir3||t._kp6()):850>e&&(t._hs3=e>700?"1":"0"),t._ev1&&t._jq2.css(t.browserSufix+"transition-duration","0s");for(var n,a=[t._mn2,t._lo2,t._az3,t._by3,t._kp2],s=0;s<a.length;s++)n=a[s].find("img"),n&&t._fun5(n,n.data("img-width"),n.data("img-height"));if(t._jq8(t._jq3*t.sliderWidth,"x"),t._jq8(t._kp3*t.sliderHeight,"y"),t.isVideoPlaying){var o=t.videoContainer.find(".video-player"),d=t._fun5("",t.settings.maxVideoWidth,t.settings.maxVideoHeight,!0);o.css({"margin-left":d.left,"margin-top":d.top,width:d.width,height:d.height}),o.removeAttr("width")}}},updateContents:function(){var t=this,e=(t.currAlbumItems.eq(t.currItemId),[]);t._kp8(e,t._mn2,t.currAlbumId,t.currItemId),t._kp8(e,t._az3,t.currAlbumId,t.currItemId+1),t._kp8(e,t._lo2,t.currAlbumId,t.currItemId-1),t._kp8(e,t._by3,t.currAlbumId+1,0),t._kp8(e,t._kp2,t.currAlbumId-1,0),t._mn8(e);var i=t._ev8(t.currAlbumId);i.data("start-item",t.currItemId),t._gt8()},_lo8:function(t,e){var i,r=this;if(0>t){if(!r._ev)return!1;t=r.numAlbums-1}else if(t>=this.numAlbums){if(!r._ev)return!1;t=0}var n=this.albumsArr[t];if(n){var a=n.find(".two-dim-item");if(a){var s=a.length;if(0>=s)return 0;if(0>e){if(!r._dw)return!1;e=s-1}else if(e>=s){if(!r._dw)return!1;e=0}i=a.eq(e)}i.find("img").data("img-scale",n.data("img-scale"))}return i},_dw8:function(t,e){var i=this;i._dw3=i.currAlbumId,i._ev3=i.currAlbumNumItems,i._fu3=i.currItemId,0>t?t=i.numAlbums-1:t>=i.numAlbums&&(t=0),i.currAlbumId=t,i.currAlbumId!=i._2prevAlbumId&&i._cx8();var r=i.albumsArr[t];if(r){var n=r.find(".two-dim-item");if(n){var a=n.length;if(0>=a)return 0;i.currAlbumNumItems=a,0>e?e=a-1:e>=a&&(e=0)}i.currItemId=e}else alert("Album is empty:"+t+" id:"+e)},_gt8:function(t){function e(){i._cx5.text(""+(i.currItemId+1)+" of "+i.currAlbumNumItems)}var i=this;if("y"===t)i.numAlbums>1&&i.currAlbumId>=0&&(i.settings.appendGalleriesToMenu&&(i._by6.removeClass("current-album-menu-item"),i._by6.eq(i.currAlbumId).addClass("current-album-menu-item")),i._mn||i._az7(i._mn4),setTimeout(function(){i._cx5.text(""+(i.currItemId+1)+" of "+i.currAlbumNumItems),i._by5.text(i.albumsArr[i.currAlbumId].find(".album-title").text())},400),i._gtn6(),i._cxn2());else if("x"===t)e(),i._cxn2();else{if(i._by6){var r=i._by6.eq(i.currAlbumId);r.addClass("current-album-menu-item")}i._gtn6(),i._by5.text(i.albumsArr[i.currAlbumId].find(".album-title").text()),e(),i._cxn2()}},_cxn2:function(){var t=this;t._cx2&&(t._jq5.hasClass("disabled-arrow")&&t._jq5.removeClass("disabled-arrow"),t._kp5.hasClass("disabled-arrow")&&t._kp5.removeClass("disabled-arrow"),t.currItemId<=0?t.currAlbumId>0?t._jq5.hasClass("prev-album-arrow")||t._jq5.addClass("prev-album-arrow").find(".info-text").addClass("info-text-visible"):t._gt2&&t._fu2.find("a[rel=next]").attr("href")?t._jq5.addClass("prev-album-arrow").find(".info-text").addClass("info-text-visible"):t._jq5.addClass("disabled-arrow").find(".info-text").removeClass("info-text-visible"):t._jq5.hasClass("prev-album-arrow")&&t._jq5.removeClass("prev-album-arrow").find(".info-text").removeClass("info-text-visible"),t.currItemId>=t.currAlbumNumItems-1?t.currAlbumId<t.numAlbums-1?t._kp5.hasClass("next-album-arrow")||t._kp5.addClass("next-album-arrow").find(".info-text").addClass("info-text-visible"):t._gt2&&t._fu2.find("a[rel=prev]").attr("href")?t._kp5.addClass("next-album-arrow").find(".info-text").addClass("info-text-visible"):t._kp5.addClass("disabled-arrow").find(".info-text").removeClass("info-text-visible"):t._kp5.hasClass("next-album-arrow")&&t._kp5.removeClass("next-album-arrow").find(".info-text").removeClass("info-text-visible"))},_gtn6:function(){},_ev8:function(t){return 0>t?t=this.numAlbums-1:t>=this.numAlbums&&(t=0),this.albumsArr[t]},_mn8:function(t){var e=this;if(t){for(var i,r,n,a,s,o,d=0;d<t.length;d++)i=t[d],a=i.block,o=i.item.data(),i.item?(r=a.find("img"),s=Boolean(void 0!==o.videoUrl),s||a.find(".play-button-container").remove(),n=i.item.find("a").attr("href"),r.attr("src")!==n?r.css("visibility","hidden"):i.block.hasClass("loading")||r.css("visibility","visible"),e._fu8(a,i.bgColor,i.albumId)):(t.splice(d,1),d--);e.isLoading=!0}e.loadQueue=t,e._hsn7()},_irn8:function(t){var e=this;return function(){var i=t.img,r=t.loadDataItem.item.data(),n=t.block.find(".block-inside"),a=Boolean(void 0!==r.videoUrl);i.data("blocked-by-loop")||i.css({visibility:"visible"}),a?(n.find(".play-button-container").unbind("click").remove(),!n.find(".play-button-container").length>0&&(n.append('<a class="play-button-container"><span class="play-button"><i class="play-icons-wrap"><u class="play-button-icon"></u><u class="play-video-loading-icon"></u></i></snan></a>'),n.find(".play-button-container").bind("click",function(i){return e.moved?!1:(i.preventDefault(),i.stopImmediatePropagation(),e._ir3=!0,e._jqn9(t,n),void 0)}))):n.find(".play-button-container").length>0&&(n.find("img").css("cursor","inherit").unbind("click"),n.find(".play-button-container").unbind("click"),n.find(".play-button-container").remove()),t.block.removeClass("loading"),t.block.find(".preloader-container").remove(),i.unbind("error.tds"),i.unbind("load.tds"),!e.firstLoaded&&e.settings.firstImageLoadedCallback&&(e.settings.firstImageLoadedCallback.call(e),e.firstLoaded=!0),e.loadQueue.length>1?(e.loadQueue.shift(),e._hsn7()):e.isLoading=!1}},_hsn7:function(){var e=this,i=e.loadQueue[0];if(i){var r=i.item;if(r){var n=i.block,a=n.find("img").eq(0),s=r.find("a").attr("href"),o=r.attr("data-img-width"),d=r.attr("data-img-height");if(a.length<=0?(hasImage=!1,a=t("<img />"),currBlockPath=""):(hasImage=!0,currBlockPath=a.attr("src")),a.data({"img-width":o,"img-height":d,"img-scale":r.data("img-scale")}),currBlockPath===s)return void(n.hasClass("loading")||(e.loadQueue.length>1?(e.loadQueue.shift(),e._hsn7()):e.isLoading=!1));e.imageLoader&&e.imageLoader.attr("src")==s?(e._fun5(a,o,d),e._irn8({type:"loaded",item:r,block:n})):(n.addClass("loading"),n.append('<div class="preloader-container"><div class="preloader-spinner"></div></div>'),a.css("visibility","hidden").bind("load.tds",e._irn8({type:"loaded",loadDataItem:i,block:n,img:a})).bind("error.tds",e._irn8({type:"error",loadDataItem:i,block:n,img:a})).attr({src:s,alt:r.find("a").text()}),hasImage||a.appendTo(n.find(".block-inside")),e._fun5(a,o,d))}}},_fun5:function(t,e,i,r){var n=this;if(imgScaleMode=r?"fit-if-smaller":t.data("img-scale"),r||(e=parseInt(e,10),i=parseInt(i,10)),r)n.imgWrapWidth=n.videoContainer.width(),n.imgWrapHeight=n.videoContainer.height();else{var a;a="fill"!==imgScaleMode?n._hs3+"em":"0";var s=t.parent(".block-inside").css("margin",a);n.imgWrapWidth=s.width(),n.imgWrapHeight=s.height()}var o,d,l,u,_,c=n.imgWrapWidth,m=n.imgWrapHeight,f=!0;if("fit-if-smaller"===imgScaleMode&&(e>c||i>m)&&(imgScaleMode="fit"),"fill"===imgScaleMode||"fit"===imgScaleMode?(o=c/e,d=m/i,l="fill"==imgScaleMode?o>d?o:d:"fit"==imgScaleMode?d>o?o:d:1,u=parseInt(e*l,10),_=parseInt(i*l,10)):(u=e,_=i),f){if(!t)return{width:u,height:_,left:Math.floor((c-u)/2),top:Math.floor((m-_)/2)};t.css({"margin-left":Math.floor((c-u)/2),"margin-top":Math.floor((m-_)/2),width:u,height:_})}else{if(!t)return{width:u,height:_,left:0,top:0};t.css({width:u,height:_})}},_by2:function(){this.hasTouch||(this._mn1?this._cx.css("cursor",this._mn1):(this._cx.removeClass("grabbing-cursor"),this._cx.addClass("grab-cursor")))},_hs8:function(){this.hasTouch||(this._az2?this._cx.css("cursor",this._az2):(this._cx.removeClass("grab-cursor"),this._cx.addClass("grabbing-cursor")))},_jqn9:function(e,i){var r=this;if(r.isVideoPlaying)return!1;var n=e.loadDataItem.item.data();if(void 0!==n.videoUrl){var a,s=n.videoUrl;if(s.match(/youtu\.be/i)||s.match(/youtube\.com\/watch/i))if(a=r._kpn10(s)){r.isVideoPlaying=!0,s="http://www.youtube.com/embed/"+a+"?rel=1",r.settings.autoplayVideo&&(s+="&autoplay=1&showinfo=0"),i.find(".play-button").addClass("play-button-loading"),r._byn1Video(e.loadDataItem.block);var o=t('<iframe class="video-player" src ="'+s+'" frameborder="no"></iframe>');r.videoOverlay.css("display","block");var d=r._fun5("",r.settings.maxVideoWidth,r.settings.maxVideoHeight,!0);o.css({"margin-left":d.left,"margin-top":d.top,width:d.width,height:d.height}),r._hs2.removeClass("hidden-video"),r.videoContainer.append(o)}else alert("Incorrect YouTube URL syntax");else if(s.match(/vimeo\.com/i)){a=r._mnn12(s),r.isVideoPlaying=!0,s="http://player.vimeo.com/video/"+a+"?title=0&byline=0&portrait=0",r.settings.autoplayVideo&&(s+="&autoplay=1"),i.find(".play-button").addClass("play-button-loading"),r._byn1Video(e.loadDataItem.block);var o=t('<iframe class="video-player" src ="'+s+'" frameborder="no"></iframe>');r.videoOverlay.css("display","block");var d=r._fun5("",r.settings.maxVideoWidth,r.settings.maxVideoHeight,!0);o.css({"margin-left":d.left,"margin-top":d.top,width:d.width,height:d.height}),r._hs2.removeClass("hidden-video"),r.videoContainer.append(o)}else alert("Incorrect video URL: "+s)}},stopAndCloseVideo:function(){var t=this;t._hs2.addClass("hidden-video"),t.videoOverlay.css("display","none"),t.videoContainer.find("iframe").remove();var e=t._mn2.find("img");e.length>0&&e.animate({opacity:1},400,"easeOut"),t._mn2.find(".play-button-loading").removeClass("play-button-loading"),t.isVideoPlaying=!1,t._kp6()},_byn1Video:function(t){var e=this;e._ir4&&e._ev5();var i=t.find("img");i.length>0&&i.animate({opacity:0},400,"easeOut"),e._jq6()},_kp6:function(){var t=this;t._ir3||(t._byn1(t._kp4),t._ir3=!0,t._byn1(t._hs4))},_jq6:function(){var t=this;t._ir3&&(t._ir4&&t._ev5(),t._kp4.hasClass("collapsed-gallery-page-menu")&&t._az7(t._kp4),t._az7(t._hs4),t._ir3=!1)},_az7:function(t,e){setTimeout(function(){t.stop().animate({opacity:0},300,function(){t.css("display","none"),e&&e.call()})},0)},_byn1:function(t,e){t.stop().css("display","block"),setTimeout(function(){t.animate({opacity:1},300,function(){e&&e.call()})},0)},_mnn12:function(t){var e=/\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,i=t.match(e);return i?i[2]:!1},_kpn10:function(t){var e=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,i=t.match(e);return i&&11==i[7].length?i[7]:!1},_mn6:function(){var e=this;if(0==e.currItemId||!e._ir4){if(e._2prevAlbumId=e.currAlbumId,e._dw5.data("curr-album-id")!==e.currAlbumId){var i=e.albumsArr[e.currAlbumId].find(".album-meta"),r='<div class="info-container" style="padding-bottom:50px;">'+i.html(),n=i.find(".album-title a"),a=n.attr("href");n=n.html();var s=e._lo8(e.currAlbumId,0).find("a").attr("href");r+='<div class="bottom-bar clearfix" ><div class="share-project">',r+='<a href="http://pinterest.com/pin/create/button/?url='+a+"&media="+s+"&description="+n+'" class="pin-it-btn"></a>',r+='<a class="facebook-share-btn" href="http://www.facebook.com/sharer/sharer.php?u='+a+'">',r+="</a>",r+='<a href="javascript:void(0);" class="close-project">'+e._by.closeProjectInfo+"</a>",r+="</div>",r+="</div>",e._dw5.html(r);var o=e._dw5.find(".album-title a");o.replaceWith(o.text());var d=e._dw5.find(".close-project");d.bind("click",function(t){t.preventDefault(),e._cx8()}),e._dw5.find(".pin-it-btn, .facebook-share-btn").click(function(e){e.preventDefault();window.open(t(this).attr("href"),"signin","width=665,height=300")}),"undefined"!=typeof FB&&null!=FB&&FB.XFBML.parse(e._dw5.get(0)),e._dw5.data("curr-album-id",e.currAlbumId)}e._byn1(e._dw5),e._az7(e._mn4),e._ir4=!0}},_cx8:function(){var t=this;t._ir4&&(t._cx3=!0,t._az7(t._dw5,function(){t._cx3=!1}),t._byn1(t._mn4),t._ir4=!1)},_ev5:function(){var t=this;t._ir4?t._cx8():t._mn6()},_by1n14:function(){var t=this,e=window.innerWidth||document.body.clientWidth;t._cx1n15&&(t._dw1n16=!0,e>600?t._kp4.css("width","50%"):t._kp4.css("width","100%"))},_ev2:function(){var t=window.location.href.split("?")[1];if(!t)return{};for(var e=t.split("&"),i={},r=0,n=e.length;n>r;r++){var a=e[r].split("=");i[a[0]]=a[1]}return i}},t.fn.twoDimSlider=function(i){return this.each(function(){var r=new e(t(this),i);t(this).data("twoDimSlider",r)})},t.fn.twoDimSlider.defaults={keyboardNavEnabled:!0,transitionSpeed:600,autoplayVideo:!0,maxVideoWidth:1280,maxVideoHeight:720,openInfoBlockAtStart:!1,disableContextMenu:!1,easeInOutEasing:"easeInOutSine",css3easeInOutEasing:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",firstImageLoadedCallback:!1,appendGalleriesToMenu:!1,autoOpenDescription:Boolean(tdSliderVars.autoOpenProjectDesc)},t.fn.twoDimSlider.settings={}}(jQuery);
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */
(function($){var c=['DOMMouseScroll','mousewheel'];if($.event.fixHooks){for(var i=c.length;i;){$.event.fixHooks[c[--i]]=$.event.mouseHooks}}$.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var i=c.length;i;){this.addEventListener(c[--i],handler,false)}}else{this.onmousewheel=handler}},teardown:function(){if(this.removeEventListener){for(var i=c.length;i;){this.removeEventListener(c[--i],handler,false)}}else{this.onmousewheel=null}}};$.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}});function handler(a){var b=a||window.event,args=[].slice.call(arguments,1),delta=0,returnValue=true,deltaX=0,deltaY=0;a=$.event.fix(b);a.type="mousewheel";if(b.wheelDelta){delta=b.wheelDelta/120}if(b.detail){delta=-b.detail/3}deltaY=delta;if(b.axis!==undefined&&b.axis===b.HORIZONTAL_AXIS){deltaY=0;deltaX=-1*delta}if(b.wheelDeltaY!==undefined){deltaY=b.wheelDeltaY/120}if(b.wheelDeltaX!==undefined){deltaX=-1*b.wheelDeltaX/120}args.unshift(a,delta,deltaX,deltaY);return($.event.dispatch||$.event.handle).apply(this,args)}})(jQuery);



/* Modernizr 2.5.2 (Custom Build) | MIT & BSD
 * Build: http://www.modernizr.com/download/#-csstransforms3d-teststyles-testprop-testallprops-prefixes-domprefixes
 */
;window.Modernizr=function(a,b,c){function y(a){i.cssText=a}function z(a,b){return y(l.join(a+";")+(b||""))}function A(a,b){return typeof a===b}function B(a,b){return!!~(""+a).indexOf(b)}function C(a,b){for(var d in a)if(i[a[d]]!==c)return b=="pfx"?a[d]:!0;return!1}function D(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:A(f,"function")?f.bind(d||b):f}return!1}function E(a,b,c){var d=a.charAt(0).toUpperCase()+a.substr(1),e=(a+" "+n.join(d+" ")+d).split(" ");return A(b,"string")||A(b,"undefined")?C(e,b):(e=(a+" "+o.join(d+" ")+d).split(" "),D(e,b,c))}var d="2.5.2",e={},f=b.documentElement,g="modernizr",h=b.createElement(g),i=h.style,j,k={}.toString,l=" -webkit- -moz- -o- -ms- ".split(" "),m="Webkit Moz O ms",n=m.split(" "),o=m.toLowerCase().split(" "),p={},q={},r={},s=[],t=s.slice,u,v=function(a,c,d,e){var h,i,j,k=b.createElement("div"),l=b.body,m=l?l:b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:g+(d+1),k.appendChild(j);return h=["&#173;","<style>",a,"</style>"].join(""),k.id=g,m.innerHTML+=h,m.appendChild(k),l||f.appendChild(m),i=c(k,a),l?k.parentNode.removeChild(k):m.parentNode.removeChild(m),!!i},w={}.hasOwnProperty,x;!A(w,"undefined")&&!A(w.call,"undefined")?x=function(a,b){return w.call(a,b)}:x=function(a,b){return b in a&&A(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=t.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(t.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(t.call(arguments)))};return e});var F=function(a,c){var d=a.join(""),f=c.length;v(d,function(a,c){var d=b.styleSheets[b.styleSheets.length-1],g=d?d.cssRules&&d.cssRules[0]?d.cssRules[0].cssText:d.cssText||"":"",h=a.childNodes,i={};while(f--)i[h[f].id]=h[f];e.csstransforms3d=(i.csstransforms3d&&i.csstransforms3d.offsetLeft)===9&&i.csstransforms3d.offsetHeight===3},f,c)}([,["@media (",l.join("transform-3d),("),g,")","{#csstransforms3d{left:9px;position:absolute;height:3px;}}"].join("")],[,"csstransforms3d"]);p.csstransforms3d=function(){var a=!!E("perspective");return a&&"webkitPerspective"in f.style&&(a=e.csstransforms3d),a};for(var G in p)x(p,G)&&(u=G.toLowerCase(),e[u]=p[G](),s.push((e[u]?"":"no-")+u));return y(""),h=j=null,e._version=d,e._prefixes=l,e._domPrefixes=o,e._cssomPrefixes=n,e.testProp=function(a){return C([a])},e.testAllProps=E,e.testStyles=v,e}(this,this.document);


/*!
 * jQuery idleTimer plugin
 * version 0.9.100511
 * by Paul Irish.
 *   http://github.com/paulirish/yui-misc/tree/
 * MIT license
 * Copyright (c) 2009 Nicholas C. Zakas
 * adapted from YUI idle timer by nzakas:
 *   http://github.com/nzakas/yui-misc/
*/
(function($){$.idleTimer=function(f,g,h){h=$.extend({startImmediately:true,idle:false,enabled:true,timeout:30000,events:'mousemove keydown DOMMouseScroll mousewheel mousedown touchstart touchmove'},h);g=g||document;var i=function(a){if(typeof a==='number'){a=undefined}var b=$.data(a||g,'idleTimerObj');b.idle=!b.idle;var c=(+new Date())-b.olddate;b.olddate=+new Date();if(b.idle&&(c<h.timeout)){b.idle=false;clearTimeout($.idleTimer.tId);if(h.enabled)$.idleTimer.tId=setTimeout(i,h.timeout);return}var d=jQuery.Event($.data(g,'idleTimer',b.idle?"idle":"active")+'.idleTimer');$(g).trigger(d)},stop=function(a){var b=$.data(a,'idleTimerObj')||{};b.enabled=false;clearTimeout(b.tId);$(a).off('.idleTimer')},handleUserEvent=function(e){var a=$.data(this,'idleTimerObj');clearTimeout(a.tId);if(a.enabled){if(a.idle){i(this)}a.tId=setTimeout(i,a.timeout)}};var j=$.data(g,'idleTimerObj')||{};j.olddate=j.olddate||+new Date();if(typeof f==="number"){h.timeout=f}else if(f==='destroy'){stop(g);return this}else if(f==='getElapsedTime'){return(+new Date())-j.olddate}$(g).on($.trim((h.events+' ').split(' ').join('.idleTimer ')),handleUserEvent);j.idle=h.idle;j.enabled=h.enabled;j.timeout=h.timeout;if(h.startImmediately){j.tId=setTimeout(i,j.timeout)}$.data(g,'idleTimer',"active");$.data(g,'idleTimerObj',j)};$.fn.idleTimer=function(a,b){if(!b){b={}}if(this[0]){$.idleTimer(a,this[0],b)}return this}})(jQuery);